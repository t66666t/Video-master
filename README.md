# Video Player App

基于 Flutter 开发的跨平台视频播放器，支持 Android, iOS, Windows。

## ✨ 主要功能

*   **本地视频播放**: 支持多种视频格式。
*   **字幕支持**: 支持 SRT, ASS, VTT 等多种字幕格式，支持挂载双字幕。
*   **AI 智能字幕**: 集成 Bilibili 云端语音转文字接口，一键生成字幕。
*   **B站视频下载**: 支持解析和下载 Bilibili 视频。
*   **多端同步体验**: 针对平板、桌面端优化横屏体验。

## 🤖 AI 智能字幕使用指南

本项目集成了 Bilibili 的 BcutASR 接口，提供高精度的云端语音转文字功能。

### 如何使用

1.  **打开视频**: 播放任意本地视频。
2.  **进入 AI 转录**:
    *   **竖屏模式 (手机)**: 点击底部控制栏的 **AI** 图标。
    *   **横屏模式 (平板/桌面)**: 点击右侧侧边栏按钮 -> 选择 **字幕管理** -> 点击 **AI 转录** 按钮。
3.  **开始转录**:
    *   在弹出的面板中点击 **开始智能转录**。
    *   系统将自动提取音频、上传至云端并进行转录。
4.  **后台处理**:
    *   转录过程完全自动化，且在后台运行。
    *   您可以关闭转录面板，继续观看视频。
    *   面板会实时显示提取、上传和转录的进度。
5.  **自动挂载**:
    *   转录完成后，应用会自动下载生成的字幕文件（保存为 `.ai.srt`）。
    *   字幕将自动挂载并显示在屏幕上。
    *   同时会弹出提示通知 "AI 字幕转录完成并已自动加载"。

### 注意事项

*   **联网需求**: 该功能需要网络连接以访问 Bilibili 接口。
*   **音频上传**: 视频的音频部分将被上传至 Bilibili 服务器进行处理（仅用于转录）。
*   **多端支持**: 该功能在 Android, iOS, Windows 上均可使用。

## 🛠️ 开发说明

*   **状态管理**: 使用 `TranscriptionManager` (Provider) 管理全局转录状态，确保横竖屏切换时进度同步。
*   **音频提取**: 使用 FFmpeg 提取音频（Windows 使用 `ffmpeg.exe`，移动端使用 `ffmpeg_kit`）。
*   **接口调用**: 封装在 `BcutAsrService` 中。
